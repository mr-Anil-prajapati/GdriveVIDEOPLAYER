<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Local VR Player</title>

<link href="https://vjs.zencdn.net/8.10.0/video-js.css" rel="stylesheet" />
<link href="https://unpkg.com/videojs-vr/dist/videojs-vr.css" rel="stylesheet">

<style>
body { font-family: Arial; margin: 0; background: #111; color: #fff; }
.container { display: flex; height: 100vh; }
.player { flex: 3; padding: 20px; display: flex; flex-direction: column; }
.sidebar { flex: 1; background: #222; overflow-y: auto; padding: 10px; }
button { padding:8px 16px; background:red; color:white; border:none; border-radius:6px; cursor:pointer; margin-right:10px; }
.video-item { margin-bottom:10px; cursor:pointer; }
.video-item.active { border:2px solid red; }
</style>
</head>

<body>

<div class="container">

<div class="player">

<video id="mainPlayer"
 class="video-js vjs-default-skin"
 controls
 playsinline
 width="100%">
</video>

<br>

<button id="vrToggle">ü•Ω VR OFF</button>
<button id="nextBtn">Next ‚ñ∂</button>
<input type="file" id="folderPicker" webkitdirectory multiple style="display:none;">
<button id="loadBtn">üìÅ Load Folder</button>

</div>

<div class="sidebar" id="sidebar"></div>

</div>

<script src="https://vjs.zencdn.net/8.10.0/video.min.js"></script>
<script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
<script src="https://unpkg.com/videojs-vr/dist/videojs-vr.min.js"></script>

<script>

const player = videojs('mainPlayer');

let vrEnabled=false;
let vrInstance=null;

function enableVR(){

  if(!vrInstance){

    vrInstance = player.vr({
      projection:'360',
      motionControls:true
    });

  }

}

function disableVR(){

  if(vrInstance){
    vrInstance.reset();
    vrInstance=null;
  }

}

// VR toggle button
document.getElementById("vrToggle").onclick=()=>{

  vrEnabled=!vrEnabled;

  if(vrEnabled){
    enableVR();
    vrToggle.textContent="ü•Ω VR ON";
  }else{
    disableVR();
    vrToggle.textContent="ü•Ω VR OFF";
  }

};

const sidebar=document.getElementById("sidebar");
const folderPicker=document.getElementById("folderPicker");

let files=[];
let currentIndex=0;

document.getElementById("loadBtn").onclick=()=>folderPicker.click();

folderPicker.addEventListener("change",(e)=>{

  files=Array.from(e.target.files).filter(f=>f.type.startsWith("video"));

  loadSidebar();
  playVideo(0);

});

function loadSidebar(){

  sidebar.innerHTML="";

  files.forEach((file,i)=>{

    const item=document.createElement("div");
    item.className="video-item";
    item.textContent=file.name;

    item.onclick=()=>playVideo(i);

    sidebar.appendChild(item);

  });

}

function playVideo(i){

  currentIndex=i;

  player.src({
    src:URL.createObjectURL(files[i]),
    type:files[i].type
  });

  player.play();

}

document.getElementById("nextBtn").onclick=()=>{

  currentIndex=(currentIndex+1)%files.length;
  playVideo(currentIndex);

};

</script>

</body>
</html>
